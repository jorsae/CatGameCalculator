(()=>{var t={342:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Crafting:()=>n});class n{constructor(t){this.craftingRecipes=t,this.craftingList=new Map,this.craftingTime=30,this.currentCraft=new Map,this.inventory=new Map}addItemToCrafting(t,e){if(void 0!==this.craftingRecipes.get(t)){var i=this.craftingList.get(t);void 0===i?0===e?this.craftingList.delete(t):this.craftingList.set(t,e):0===i+e?this.craftingList.delete(t):this.craftingList.set(t,i+e)}}setItemToCrafting(t,e){void 0!==this.craftingRecipes.get(t)&&(0===e?this.craftingList.delete(t):this.craftingList.set(t,e))}addItemToInventory(t,e){if(void 0!==this.craftingRecipes.get(t)){var i=this.inventory.get(t);void 0===i?0===e?this.inventory.delete(t):this.inventory.set(t,e):0===i+e?this.inventory.delete(t):this.inventory.set(t,i+e)}}setItemToInventory(t,e){void 0!==this.craftingRecipes.get(t)&&(0===e?this.inventory.delete(t):this.inventory.set(t,e))}setCraftingTime(t){this.craftingTime=t}getCraftingRequirements(t=!0){this.currentCraft.clear();var e=new Map(this.inventory);for(const[a,s]of this.craftingList.entries()){var i=s;t&&void 0!==(n=e.get(a))&&(s>n?(i=s-n,e.set(a,0)):(i=0,e.set(a,n-s))),(r=this.craftingRecipes.get(a)).quantity=i,this.getItemRequirements(r,r.quantity),this.addElementToCurrentCraft(r.name,r.quantity)}if(console.log("BEFORE"),console.log(this.currentCraft),console.log(this.currentCraft.get("Elementstone")),t){for(const[t,i]of this.currentCraft.entries()){var n;if(void 0!==(n=e.get(t)))if(i>n){var r=this.craftingRecipes.get(t);this.subtractItemRequirements(r,n),this.addElementToCurrentCraft(r.name,-n),e.set(t,0)}else console.log("Else"),r=this.craftingRecipes.get(t),this.subtractItemRequirements(r,i),this.addElementToCurrentCraft(r.name,-i),e.set(t,n-i)}console.log("AFTER"),console.log(this.currentCraft),console.log(this.currentCraft.get("Elementstone"))}var a=[];for(const[t,e]of this.currentCraft.entries())(r=this.craftingRecipes.get(t)).quantity=e,a.push(r);for(var r of(a.sort((function(t,e){return t.sortingOrder-e.sortingOrder})),this.currentCraft.clear(),a))this.addElementToCurrentCraft(r.name,r.quantity);return this.currentCraft}subtractItemRequirements(t,e=1){if(null!==t.craftingRequirements){for(var i=0;i<t.craftingRequirements.length;i++){var n=t.craftingRequirements[i].craftingItem.name,r=t.craftingRequirements[i].quantity*e,a=this.craftingRecipes.get(n);this.subtractItemRequirements(a,r),this.addElementToCurrentCraft(n,-r)}return this.currentCraft}}getItemRequirements(t,e=1){if(null!==t.craftingRequirements){for(var i=0;i<t.craftingRequirements.length;i++){var n=t.craftingRequirements[i].craftingItem.name,r=t.craftingRequirements[i].quantity*e,a=this.craftingRecipes.get(n);this.getItemRequirements(a,r),this.addElementToCurrentCraft(n,r)}return this.currentCraft}}addElementToCurrentCraft(t,e){if(void 0===this.currentCraft.get(t))e>0&&this.currentCraft.set(t,e);else{var i=this.currentCraft.get(t)+e;i<0?this.currentCraft.delete(t):this.currentCraft.set(t,i)}}massUpdateCraftingItemMaxCraftingQuantity(t){for(const[n,r]of this.craftingRecipes.entries()){var e=1,i=t.get(n);void 0!==i&&(e=i),this.updateCraftingItemMaxCraftingQuantity(n,e)}}updateCraftingItemMaxCraftingQuantity(t,e){var i=this.craftingRecipes.get(t);void 0!==i&&(i.maxCraftingQuantity=e,this.craftingRecipes.set(t,i))}resetCraftingItemMaxCraftingQuantity(){for(const[t,e]of this.craftingRecipes.entries())e.maxCraftingQuantity=-1,this.craftingRecipes.set(t,e)}getTotalCost(t=1,e=!0){var i=0;for(const[r,a]of this.getCraftingRequirements(e)){var n=this.craftingRecipes.get(r);n.quantity=a,i+=n.getCost(this.craftingTime,t)}return i}}},638:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CraftingItem:()=>a});var n=i(258),r=i(478);class a{constructor(t,e,i,n,r,a,s=null,f=1){this.name=t,this.category=e,this.baseCost=i,this.craftingTime=n,this.rarity=r,this.sortingOrder=a,this.quantity=f,this.maxCraftingQuantity=-1,this.craftingRequirements=s}getRarityValue(){switch(this.rarity){case r.Rarity.HIDDEN:return 0;case r.Rarity.RAW:return 1;default:case r.Rarity.COMMON:return 2;case r.Rarity.RARE:return 3;case r.Rarity.EPIC:return 4;case r.Rarity.LEGENDARY:return 5}}getCraftingMethod(t){if(this.maxCraftingQuantity>0){var e=Math.floor(this.quantity/this.maxCraftingQuantity),i=this.quantity-this.maxCraftingQuantity*e;return e>0?i<=0?[new n.CraftingMethod(this.maxCraftingQuantity,e)]:[new n.CraftingMethod(this.maxCraftingQuantity,e),new n.CraftingMethod(i,1)]:[new n.CraftingMethod(this.quantity,1)]}if(e=1,this.craftingTime<t&&(e=Math.floor(t/this.craftingTime)),e>this.quantity)return e=this.quantity,[new n.CraftingMethod(1,this.quantity)];if(1===e)return[new n.CraftingMethod(this.quantity,1)];for(var r=Math.ceil(this.quantity/e),a=r-1,s=1;s<=e;s++)if(r*s+a*(e-s)===this.quantity)return e-s>0?[new n.CraftingMethod(r,s),new n.CraftingMethod(a,e-s)]:[new n.CraftingMethod(r,s)];return[]}getCost(t,e=1){for(var i=this.getCraftingMethod(t),n=0,r=0;r<i.length;r++)n+=this.baseCost/4*(Math.pow(i[r].itemQuantity,2)+3*i[r].itemQuantity)*i[r].crafts;return"3 Stars"===this.name?n:Math.ceil(n/e)}toString(){var t="";if(null!==this.craftingRequirements){for(var e=0;e<this.craftingRequirements.length;e++)t+=this.craftingRequirements[e].craftingItem.name+": "+this.craftingRequirements[e].quantity*this.quantity+", ";t=t.substring(0,t.length-2)}return"["+this.category+"/"+this.rarity+"] "+this.name+"("+this.quantity+"): "+this.baseCost+"coins, "+this.craftingTime+"min. Crafting Requirement: "+t}}},258:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CraftingMethod:()=>n});class n{constructor(t,e){this.itemQuantity=t,this.crafts=e}toString(){var t=1===this.crafts?"time":"times";return this.itemQuantity+"x "+this.crafts+t}}},104:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CraftingRequirement:()=>n});class n{constructor(t,e){this.craftingItem=t,this.quantity=e}toString(){return this.craftingItem.name+": "+this.quantity}}},478:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Rarity:()=>n});const n={HIDDEN:"hidden",RAW:"raw",COMMON:"common",RARE:"rare",EPIC:"epic",LEGENDARY:"legendary"}},353:(t,e,i)=>{"use strict";i.r(e),i.d(e,{getCraftingRecipes:()=>s});var n=i(638),r=i(104),a=i(478);function s(){var t=new Map;const e=new n.CraftingItem("Cotton","",0,0,a.Rarity.RAW,1),i=new n.CraftingItem("Log","",0,0,a.Rarity.RAW,2),s=new n.CraftingItem("Rock","",0,0,a.Rarity.RAW,3),f=new n.CraftingItem("Quartz","",0,0,a.Rarity.RAW,4);t.set(e.name,e),t.set(i.name,i),t.set(s.name,s),t.set(f.name,f);var g=[new r.CraftingRequirement(e,3)];const o=new n.CraftingItem("String","Basic Crafting",50,5,a.Rarity.COMMON,5,g);t.set(o.name,o);var c=[new r.CraftingRequirement(i,3)];const u=new n.CraftingItem("Wood","Basic Crafting",50,5,a.Rarity.COMMON,6,c);t.set(u.name,u);var m=[new r.CraftingRequirement(o,2),new r.CraftingRequirement(u,2)];const C=new n.CraftingItem("Ribbon","Basic Crafting",100,15,a.Rarity.RARE,7,m);t.set(C.name,C);var h=[new r.CraftingRequirement(s,3)];const R=new n.CraftingItem("Metal","Shiny Crafting",100,15,a.Rarity.COMMON,8,h);t.set(R.name,R);var y=[new r.CraftingRequirement(R,4),new r.CraftingRequirement(C,1)];const l=new n.CraftingItem("Needles","Shiny Crafting",200,30,a.Rarity.RARE,9,y);t.set(l.name,l);var d=[new r.CraftingRequirement(l,2),new r.CraftingRequirement(C,2)];const q=new n.CraftingItem("Sparkles","Shiny Crafting",300,60,a.Rarity.EPIC,10,d);t.set(q.name,q);var v=[new r.CraftingRequirement(s,4)];const w=new n.CraftingItem("Bronze","Precious Crafting",200,30,a.Rarity.COMMON,11,v);t.set(w.name,w);var I=[new r.CraftingRequirement(w,3),new r.CraftingRequirement(q,1)];const M=new n.CraftingItem("Silver","Precious Crafting",300,120,a.Rarity.RARE,12,I);t.set(M.name,M);var p=[new r.CraftingRequirement(M,2),new r.CraftingRequirement(q,2)];const E=new n.CraftingItem("Gold","Precious Crafting",500,360,a.Rarity.EPIC,13,p);t.set(E.name,E);var A=[new r.CraftingRequirement(f,10)];const O=new n.CraftingItem("Amethyst","Jewel Crafting",300,60,a.Rarity.COMMON,14,A);t.set(O.name,O);var T=[new r.CraftingRequirement(O,7),new r.CraftingRequirement(M,2)];const b=new n.CraftingItem("Pendant","Jewel Crafting",500,180,a.Rarity.RARE,15,T);t.set(b.name,b);var x=[new r.CraftingRequirement(b,3),new r.CraftingRequirement(E,2)];const Q=new n.CraftingItem("Necklace","Jewel Crafting",500,760,a.Rarity.EPIC,16,x);t.set(Q.name,Q);var N=[new r.CraftingRequirement(f,20)];const P=new n.CraftingItem("Orb","Magic Crafting",300,60,a.Rarity.COMMON,17,N);t.set(P.name,P);var S=[new r.CraftingRequirement(P,2),new r.CraftingRequirement(M,1)];const L=new n.CraftingItem("Water","Magic Crafting",800,360,a.Rarity.RARE,18,S);t.set(L.name,L);var W=[new r.CraftingRequirement(P,6),new r.CraftingRequirement(E,1)];const D=new n.CraftingItem("Fire","Magic Crafting",1e3,720,a.Rarity.EPIC,19,W);t.set(D.name,D);var B=[new r.CraftingRequirement(L,2),new r.CraftingRequirement(C,10)];const G=new n.CraftingItem("Waterstone","Ancient Crafting",1500,720,a.Rarity.RARE,20,B);t.set(G.name,G);var j=[new r.CraftingRequirement(D,1),new r.CraftingRequirement(q,2)];const F=new n.CraftingItem("Firestone","Ancient Crafting",1500,720,a.Rarity.EPIC,21,j);t.set(F.name,F);var Y=[new r.CraftingRequirement(F,1),new r.CraftingRequirement(G,1)];const k=new n.CraftingItem("Elementstone","Ancient Crafting",5e3,1440,a.Rarity.LEGENDARY,22,Y);t.set(k.name,k);var J=[new r.CraftingRequirement(k,1),new r.CraftingRequirement(Q,1)];const z=new n.CraftingItem("Artifact","Ruin Crafting",1e4,4320,a.Rarity.LEGENDARY,23,J);return t.set(z.name,z),t}}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,i),a.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t=i(342),e=i(353).getCraftingRecipes(),n=new t.Crafting(e);n.addItemToCrafting("Artifact",2),console.log(n.craftingRecipes.get("Artifact")),n.updateCraftingItemMaxCraftingQuantity("Artifact",2),console.log(n.craftingRecipes.get("Artifact"));var r=n.getTotalCost();console.log(r)})()})();